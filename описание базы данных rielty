База данных rielty - это мой курсовой проект по итогам курса Mysql.
В рамках проекта реализованы таблицы, связи между таблицами, процедуры, представления, триггеры. При создании таблиц следовал принципу атомарности.

Данный проект состоит из 3 файлов:
1) настоящего описания;
2) файл дампа базы данных rielty;
3) отдельного файла с типовыми запросами применительно к данной БД.

Файл дампа можно запустить через команду Sourse из консоли.

Описание таблиц.
+-------------------------------+
| Tables_in_rielty              |
+-------------------------------+
| objects                       |
| object_profile                |
| deal_type                     |
| object_type                   |
| photos                        |
| personal                      |
| offices_info                  |
| closed_deals                  |             |
| top_deals                     | 
| partner_companies             | 
+-------------------------------+
Таблицы objects и object_profile содержат данные об объектах недвижимости.
При этом, в objects хранятся системные данные (id, дата создания, статус, дата закрытия), а 
в object_profile содержатся индивидуальные характеристики объекта (площадь, адрес, цена, собственник и тп). Каждый объект закреплен за конкретным сотрудником из таблицы personal.
При завершении сделки таблицу objects следует обновить путем внесения в колонку status значения 'closed' и дату и время закрытия в колонку closing_date. Закрывать сделки обязательно с проставлением и статуса и времени закрытия.

Таблицы deal_type и object_type содержат типы сделок и типы объектов соотвественно.
Объект может быть домом, коммерческим, квартирой, аппартаментами. Тип сделки - аренда либо продажа. Таблица objects содержит id каждой из этих таблиц в каждой своей строке.

Таблица  photos предназначена для поиска фотографий объектов.

Таблица personal содержит в себе информацию о работающих сотрудниках в агенстве.

В таблице offices_info хранятся данные о перечне офисов агенства.

Таблица closed_deals представляет собой список закрытых сделок, где подсчитана
сумма уплаченной клиентов комиссии и, исходя из ее значения, заработок сотрудника и прибыль компании в соотношении 30%/70%. Данная таблица заполняется автоматически. Так, при внесении в поле status таблицы objects значения 'closed', срабатывает триггер, заполняющий соответствующими данными таблицу closed_deals.

Тop_deals - таблица, отображающая двух лучших работников в рамках номинаций "Самая быстрая сделка" и "Самый большой доход (компании)". Таблица аналогично заполняется автоматически благодаря двум созданным триггерам. Триггеры срабатывают в момент добавления записи в таблицу closed_deals. Если сделка одновременно яв-ся и самой быстрой и дорогой, то сотрудник закрепляется в топе по обоим позициям.

Таблица partner_companies содержит данные компаний-партнеров, которыми мы можем поделиться с нашими клиентами (мувинг, ремонтная бригада и тп).

all_info_about_active_objects - является представлением, созданным для отображения всей имеющейся информации так или иначе касащейся объекта (характеристики, имя риелтора, имя и тел. собтсвенника и тп).

commerce - представление, созданное для отображения коммерческих объектов стоимостью до 1 млн

В БД реализовано 4 триггера:
add_data_closed_deals - наполняет таблицу closed_deals;
delete_photo - удаляет фото по закрытым объектам (сделкам);
the_fustest_deal и the_biggest_encome выявляют лучшего сотрудника в таблице top_deals.

